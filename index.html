<!DOCTYPE html>
<html>
<!-- this is for the webapp thing being implemented later on <link rel="manifest" href="manifest.json"> -->
<head>
  <!-- Title -->
  <title> onkomeillasplit.ml </title>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-84654491-3"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-84654491-3');
  </script>
  <!-- internal CSS
  <link rel="stylesheet" href="staili.css"> -->

</head>

<body>

<div align="center" class="bg-dark text-white">
  <h1 align="center"> Onkomeillasplit.ml</h1>
  <div class="btn-group btn-group-sm">
  <button id="1" style="margin-top: 2px;" onClick="reply_click(this.id)" class="btn btn-primary btn-sm">Maanantai</button>
  <button id="2" style="margin-top: 2px;" onClick="reply_click(this.id)" class="btn btn-primary btn-sm">Tiistai</button>
    <button id="3" style="margin-top: 2px;" onClick="reply_click(this.id)" class="btn btn-primary btn-sm">Keskiviikko</button>
    <button id="4" style="margin-top: 2px;" onClick="reply_click(this.id)" class="btn btn-primary btn-sm">Torstai</button>
      <button id="5" style="margin-top: 2px;" onClick="reply_click(this.id)" class="btn btn-primary btn-sm">Perjantai</button>

</div>
      <br>
<p class="text-dark">-</p>
</div>

  <div id="FIRST">
    <div class="0" style="display:none">
      <h3 align="center">Sunnuntai / Sunday</h3>

    </div>
    <div class="1" style="display:none">
      <h3 align="center">Maanantai / Monday</h3>

    </div>
    <div class="2" style="display:none">
      <h3 align="center">Tiistai / Tuesday</h3>

    </div>
    <div class="3" style="display:none">
      <h3 align="center">Keskiviikko / Wednesday</h3>

    </div>
    <div class="4" style="display:none">
      <h3 align="center">Torstai / Thursday</h3>

    </div>
    <div class="5" style="display:none">
      <h3 align="center">Perjantai / Friday</h3>

    </div>
    <div class="6" style="display:none">
      <h3 align="center">Lauantai / Saturday</h3>

    </div>
  </div>

  <div class="SECOND">
    <div class="0" style="display:none">
      <div class="mx-auto" style="width: 75%;" >
      <h2>It's weekend so no data to show</h2>
      <br> But dont worry. We have this dog here for ya!</br>
      <img src="https://media.giphy.com/media/4Zo41lhzKt6iZ8xff9/giphy-downsized.gif"></img>

      <p style="font-size:5pt;color:gray" >GIF source: giphy</p>

      </div>
    </div>
    <div class="1" style="display:none">
		
      <!-- MONDAY LUNCH -->
      <hr/>
       <h3 class="mx-auto" style="width: 75%;">Menu for Monday</h3>
				  <p id="mon" class="mx-auto" style="width: 75%;">
                  Loading...
				  </p>
      </div>


    </div>
    <div class="2" style="display:none">
<!-- TUESDAY LUNCH -->
<hr/>
<h3 class="mx-auto" style="width: 75%;">Menu for Tuesday</h3>
				  <p id="tue" class="mx-auto" style="width: 75%;">
                  Loading...
				  </p>
</div>

<!-- End of the taulukko -->
    </div>
    <div class="3" style="display:none">

      <!-- Wednesday LUNCH -->
      <hr/>
      <h3 class="mx-auto" style="width: 75%;">Menu for Wednesday</h3>
				  <p id="wed" class="mx-auto" style="width: 75%;">
                  Loading...
				  </p>
      </div>

    </div>
    <div class="4" style="display:none">

            <!-- Thursday LUNCH -->
            <hr/>
            <h3 class="mx-auto" style="width: 75%;">Menu for Thursday</h3>
				  <p id="thu" class="mx-auto" style="width: 75%;">
                  Loading...
				  </p>

      </div>

    </div>
    <div class="5" style="display:none">

                  <!-- Friday LUNCH -->
                  <hr/>
                  <h3 class="mx-auto" style="width: 75%;">Menu for Friday</h3>
				  <p id="fri" class="mx-auto" style="width: 75%;">
                  Loading...
				  </p>
      </div>

    </div>
    <div class="6" style="display:none">

      <div class="mx-auto" style="width: 75%;" >
        <h2>It's weekend so no data to show</h2>
        <br> But dont worry. We have this dog here for ya!</br>
        <img src="https://media.giphy.com/media/4Zo41lhzKt6iZ8xff9/giphy-downsized.gif"></img>

        <p style="font-size:5pt;color:gray" >GIF source: giphy</p>

    </div>
  </div>

<!--  <div id="credits-text">Made with &hearts; in Espoo, Finland </div> -->


</div>
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
  
  <script>
	lo = "be";
	let dates = ["mon", "tue", "wed", "thu", "fri", "weekend", "weekend"];
	function updateMenu(dateIndex) {
		if(dateIndex > 4){
			return(false);
		}
		if(dateIndex < 0){
			return(false);
		}
		document.getElementById(dates[dateIndex]).innerHTML = "<ul><li>" + obj.menu[dateIndex].replace(/\n/g, ", <br \><li>") + "</li></ul>";
		return(true);
//		console.log(document.getElementById(dates[dateIndex]).innerHTML);
	}
	function updateTables(dateIndex) {
		if(dateIndex > 5){
			return(false);
		}
		if(dateIndex < 1){
			return(false);
		}
		var table = `
					  <h3></h3>
					  <div class="mx-auto" style="width: 75%;" >
						  <h3> Lower secondary Split-lunch</h3> 11:40-12:05
						  <table class="table table-sm">
						<thead>
						  <tr>
							<th scope="col">Kurssi</th>
							<th scope="col">Opettaja</th>

						  </tr>
						</thead>
						<tbody>
						  <tr>
							<th scope="row" style="width: 50%"></th>
							<td></td>

						  </tr>


						</tbody>
					  </table>
					  <h3> Split-lunch </h3>  12:05-12:30
					  <table class="table table-sm table-dark">
					  <thead>
						  <tr>
							<th scope="col">Kurssi</th>
							<th scope="col">Opettaja</th>

						  </tr>
						</thead>
						<tbody>
					`;
		var splitTod = obj["sheets_splitLunch"][dateIndex-1];
		var normTod = obj["sheets_normalLunch"][dateIndex-1];
		console.log(splitTod);
		for(var i in splitTod){
			console.log(splitTod[i]);
			var classN  = splitTod[i].split("(")[0];
			var teachN  = splitTod[i].split("(")[1].replace("(","").replace(")","");
			table = table + `
			  <tr>
				<th scope="row"  style="width: 50%">` + classN + `</th>
				<td>`+teachN+`</td>

			  </tr>`;
		}
		table = table + `
		</table>
		  <h3>Normal-lunch</h3> 12:30-12:55
		  <table class="table table-sm">
		  <thead>
		  <tr>
			<th scope="col" style="width: 50%">Kurssi</th>
			<th scope="col">Opettaja</th>

		  </tr>
		  </thead>
		  <tbody>
		`;
		for(var i in normTod){
			console.log(normTod[i]);
			var classN  = normTod[i].split("(")[0];
			var teachN  = normTod[i].split("(")[1].replace("(","").replace(")","");
			table = table + `
			  <tr>
				<th scope="row"  style="width: 50%">` + classN + `</th>
				<td>`+teachN+`</td>

			  </tr>`;
		}
		table = table + "</tbody></table>";
		document.getElementsByClassName(dateIndex + "")[0].innerHTML = table;
		return(true);
	}
	async function load() {
		let url = 'https://eliittisafka.herokuapp.com/';
		obj = null;
		
		try {
			obj = await (await fetch(url)).json();
		} catch(e) {
			console.log('error fetching menu from ' + url);
		}
		
//		console.log(obj.menu);
		updateMenu(new Date().getDay()-1);
		updateTables(new Date().getDay());
	}
	load();
  </script>
  <script>
  var obj = {};
  var b1 = document.getElementById('b1'), b2 = document.getElementById('b2');
  function showhide() {
    var d = new Date();
    var s = document.getElementsByClassName(d.getDay());
    for (var i = 0; i < s.length; i++) {
      s[i].style.display = 'block';
     localStorage.setItem("v", d.getDay());
    }
	//updateMenu();
  }
   function reply_click(clicked_id) {
      var v = localStorage.getItem("v");

      var a = new Date();
      var d = clicked_id;
      var b = document.getElementsByClassName(a.getDay())
      var s = document.getElementsByClassName(d);
      var x = document.getElementsByClassName(v);
      for (var i = 0; i < s.length; i++) {
        console.log(v);
        if (d == v) {

          s[i].style.display = 'block';






        } else {
        s[i].style.display = 'block';
        x[i].style.display = 'none';
        localStorage.setItem("v", d);
        console.log();
		//load();
      }
      }
	  updateMenu(d-1);
	  updateTables(d);
  };
  showhide();

  </script>
</body>




</html>
